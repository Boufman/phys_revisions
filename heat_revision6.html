<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Heat Transfer Revision Quiz</title>
<style>
  /* Reset and base */
  body, html {
    margin: 0; padding: 0; overflow: hidden;
    font-family: Arial, sans-serif;
    height: 100vh; width: 100vw;
    background: #000;
    color: white;
  }
  /* Video background */
  #video {
    position: absolute;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    z-index: 1;
  }
  /* Canvas overlay */
  #overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    pointer-events: none;
    z-index: 2;
  }
  /* Quiz container on top */
  #quiz-container {
    position: absolute;
    top: 10px; left: 50%;
    transform: translateX(-50%);
    background: rgba(42, 75, 171, 0.9);
    padding: 25px 30px;
    border-radius: 15px;
    width: 90vw;
    max-width: 600px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    z-index: 3;
    user-select: none;
  }
  #timer {
    font-size: 20px;
    text-align: right;
    margin-bottom: 15px;
  }
  #question {
    font-size: 24px;
    min-height: 70px;
    margin-bottom: 20px;
  }
  #answers button {
    background: #5a8dee;
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 20px;
    padding: 15px 20px;
    width: 100%;
    margin: 10px 0;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #answers button:hover:not(:disabled) {
    background: #4171d2;
  }
  #answers button.correct {
    background: #28a745 !important;
    cursor: default;
  }
  #answers button.incorrect {
    background: #dc3545 !important;
    cursor: default;
  }
  #next-btn, #restart-btn {
    background: #ffc107;
    border: none;
    border-radius: 12px;
    color: #222;
    font-size: 20px;
    padding: 15px 30px;
    cursor: pointer;
    margin-top: 25px;
    display: none;
    width: 100%;
  }
  #restart-btn {
    background: #007bff;
    color: white;
  }
  #scoreboard {
    font-size: 22px;
    margin-top: 30px;
    text-align: center;
  }
</style>
</head>
<body>

<video id="video" autoplay playsinline muted></video>
<canvas id="overlay"></canvas>

<div id="quiz-container">
  <div id="timer">Time: <span id="time-remaining">15</span>s</div>
  <div id="question">Loading question...</div>
  <div id="answers"></div>
  <button id="next-btn">Next Question</button>
  <button id="restart-btn">Restart Quiz</button>
  <div id="scoreboard"></div>
</div>

<script>
  // Video setup (camera)
  const video = document.getElementById('video');
  navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
    .then(stream => {
      video.srcObject = stream;
    }).catch(err => {
      console.warn("Camera access denied or unavailable.", err);
    });

  // Canvas overlay setup (optional for future animations)
  const overlay = document.getElementById('overlay');
  const ctx = overlay.getContext('2d');
  function resizeCanvas() {
    overlay.width = window.innerWidth;
    overlay.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  // Quiz questions — combined from your earlier and added examples
  const questions = [
    {
      question: "An ice pack is placed on a swollen joint. What type of heat transfer occurs?",
      options: ["Conduction", "Convection", "Radiation"],
      answer: "Conduction"
    },
    {
      question: "A nurse uses a fan to cool a febrile patient. What type of heat transfer is this?",
      options: ["Radiation", "Convection", "Conduction"],
      answer: "Convection"
    },
    {
      question: "A neonate loses heat inside an incubator to the walls. What type of transfer is this?",
      options: ["Convection", "Radiation", "Conduction"],
      answer: "Radiation"
    },
    {
      question: "Why do premature babies need skin-to-skin contact (kangaroo care)?",
      options: ["Conduction", "Radiation", "Evaporation"],
      answer: "Conduction"
    },
    {
      question: "Why is running cool water better than ice for treating burns?",
      options: ["Conduction", "Convection", "Radiation"],
      answer: "Convection"
    },
    {
      question: "Why does a patient near a window feel warmer?",
      options: ["Radiation", "Conduction", "Evaporation"],
      answer: "Radiation"
    },
    {
      question: "Why shouldn't you cover a sweating patient with blankets?",
      options: ["Evaporation", "Conduction", "Convection"],
      answer: "Evaporation"
    },
    {
      question: "What causes goosebumps to reduce heat loss?",
      options: ["Evaporation", "Radiation", "Conduction"],
      answer: "Conduction"
    },
    {
      question: "How do nurses detect fever by touching the patient’s skin?",
      options: ["Radiation", "Conduction", "Evaporation"],
      answer: "Conduction"
    },
    {
      question: "What is the body doing when it shivers?",
      options: ["Producing heat", "Losing heat", "Cooling down"],
      answer: "Producing heat"
    }
  ];

  // Quiz variables
  const totalTime = 15; // seconds per question
  let currentQuestionIndex = 0;
  let score = 0;
  let timerInterval = null;
  let timeLeft = totalTime;
  let answered = false;

  // DOM elements
  const questionEl = document.getElementById('question');
  const answersEl = document.getElementById('answers');
  const timerEl = document.getElementById('time-remaining');
  const nextBtn = document.getElementById('next-btn');
  const restartBtn = document.getElementById('restart-btn');
  const scoreboardEl = document.getElementById('scoreboard');

  function startTimer() {
    timeLeft = totalTime;
    timerEl.textContent = timeLeft;
    timerInterval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        if (!answered) {
          answered = true;
          showCorrectAnswer();
          nextBtn.style.display = 'block';
        }
      }
    }, 1000);
  }

  function showQuestion() {
    answered = false;
    nextBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    scoreboardEl.textContent = '';
    const q = questions[currentQuestionIndex];
    questionEl.textContent = q.question;

    answersEl.innerHTML = '';
    q.options.forEach(option => {
      const btn = document.createElement('button');
      btn.classList.add('answer-btn');
      btn.textContent = option;
      btn.onclick = () => selectAnswer(option);
      answersEl.appendChild(btn);
    });

    startTimer();
  }

  function selectAnswer(selected) {
    if (answered) return;
    answered = true;
    clearInterval(timerInterval);

    const q = questions[currentQuestionIndex];
    const buttons = answersEl.querySelectorAll('button');

    buttons.forEach(btn => {
      btn.disabled = true;
      if (btn.textContent === q.answer) {
        btn.classList.add('correct');
      }
      if (btn.textContent === selected && selected !== q.answer) {
        btn.classList.add('incorrect');
      }
    });

    // Score: base 100 points + bonus 10 * time left
    if (selected === q.answer) {
      score += 100 + (timeLeft * 10);
    }

    nextBtn.style.display = 'block';
  }

  function showCorrectAnswer() {
    const q = questions[currentQuestionIndex];
    const buttons = answersEl.querySelectorAll('button');
    buttons.forEach(btn => {
      btn.disabled = true;
      if (btn.textContent === q.answer) {
        btn.classList.add('correct');
      }
    });
  }

  nextBtn.onclick = () => {
    currentQuestionIndex++;
    if (currentQuestionIndex >= questions.length) {
      showFinalScore();
    } else {
      showQuestion();
    }
  };

  restartBtn.onclick = () => {
    currentQuestionIndex = 0;
    score = 0;
    showQuestion();
  };

  function showFinalScore() {
    questionEl.textContent = "Quiz Complete!";
    answersEl.innerHTML = '';
    timerEl.textContent = '';
    scoreboardEl.textContent = `Your final score: ${score} points`;
    restartBtn.style.display = 'block';
    nextBtn.style.display = 'none';
  }

  // Initialize quiz
  showQuestion();

</script>
</body>
</html>
